class Tg::Api::OrdersController < ApplicationController
  protect_from_forgery with: :null_session

  def index
    questions = [
      {
        id: 1,
        title: "Почему всё такое яркое?",
        level: "Осторожный",
        answer: "Как корректно ответить клиенту:\n“Яркость привлекает внимание именно к тому, что важно для вашего бизнеса. Давайте обсудим, куда мы хотим направить взгляд клиента?”",

        about: "Клиент переживает, что яркие акценты выглядят слишком «громко» и могут отвлекать от смысла.",
        quick: "Как корректно ответить клиенту:\n“Яркость помогает выделить ключевое действие и быстрее довести пользователя до результата. Давайте уточним, какое действие для нас главное — и под него настроим акцент.”",
        analysis: "Цвет — инструмент управления вниманием. Акцентный цвет показывает, где действие, а нейтральные зоны дают контекст и помогают читать. Когда акценты расставлены по задачам, интерфейс воспринимается собранно: пользователь быстрее понимает, куда нажать и что важно.\n\nВместо обсуждения «ярко/не ярко» полезнее обсуждать: что именно мы подсвечиваем и почему. Если акцент один и он закреплён за главным действием, яркость начинает работать как навигация, а не как декор.",
        convince: [
          "Сформулируйте главное действие: покупка, заявка, запись, просмотр каталога.",
          "Покажите два варианта: с акцентом на главном действии и с равномерной окраской — сравните читаемость.",
          "Оцените воронку: где пользователи чаще всего теряются и что нужно подсветить.",
          "Предложите тест: один экран — один акцент. Остальные элементы — нейтральные."
        ],
        biz: "Акценты сокращают время принятия решения: пользователь быстрее понимает, что делать дальше. Это снижает «порог входа» и повышает конверсию в целевое действие, особенно в мобильных сценариях.",
        flags: [
          "Акцентный цвет применяется сразу в нескольких местах без роли (в итоге он перестаёт быть сигналом).",
          "Цвет выбирается «на вкус», без привязки к воронке и приоритетам.",
          "Акцент ставится на второстепенные элементы и уводит внимание от главного действия."
        ],
        similar: [
          { id: 5, title: "Надо добавить ещё одну кнопку" },
          { id: 4, title: "Это слишком минималистично" },
          { id: 6, title: "Это не похоже на наш бренд" }
        ]
      },

      # === ВОПРОС ИЗ ТВОЕГО МАКЕТА (id:2) ===
      {
        id: 2,
        title: "Зачем столько белого пространства?",
        level: "Экономный",
        answer: "Как корректно ответить клиенту:\n“Свободное пространство создаёт ощущение премиальности и помогает фокусировать внимание. Посмотрим вместе, как это влияет на восприятие ценности вашего продукта?”",

        about: "Клиент беспокоится о «пустом» месте и хочет разместить больше информации",
        quick: "Как корректно ответить клиенту:\n“Свободное пространство создаёт ощущение премиальности и помогает фокусировать внимание. Посмотрим вместе, как это влияет на восприятие ценности вашего продукта?”",
        analysis: "Свободное пространство — это психологический инструмент. Когда элементы окружены «воздухом», они воспринимаются как более ценные. Исследования показывают, что щедрые отступы повышают воспринимаемую ценность продукта почти на 90%.\n\nЭто не потерянное место, а инвестиция в восприятие.",
        convince: [
          "Покажите сравнение двух вариантов: плотный и с «воздухом»",
          "Приведите примеры премиальных брендов: Apple, Chanel, Tesla",
          "Предложите тестирование на фокус-группе: какой вариант кажется дороже"
        ],
        biz: "Свободное пространство управляет восприятием ценности. Меньше элементов на экране означает больше внимания каждому и, как следствие, выше конверсия",
        flags: [
          "Желание уместить всю информацию на одном экране",
          "Страх перед использованием скролла",
          "Равномерное заполнение без расставления приоритетов"
        ],
        similar: [
          { id: 1, title: "Почему всё такое яркое?" },
          { id: 3, title: "Конкуренты делают по- другому" },
          { id: 4, title: "Это слишком минималистично" }
        ]
      },

      {
        id: 3,
        title: "Конкуренты делают по- другому",
        level: "Сомневающийся",
        answer: "Как корректно ответить клиенту:\n“Похожесть на конкурентов делает вас менее заметным. Давайте найдём визуальные решения, которые подчеркнут вашу уникальность на рынке?”",

        about: "Клиент сравнивает с рынком и хочет «как у лидеров», чтобы снизить риск решения.",
        quick: "Как корректно ответить клиенту:\n“Давайте разложим по полкам: что у конкурентов работает как бизнес-механика, а что — просто стиль. Мы возьмём рабочие паттерны и адаптируем под вашу аудиторию и продукт.”",
        analysis: "Сравнение с конкурентами — нормальная точка опоры: клиент пытается снизить неопределённость. Важно перевести разговор из «нравится/похоже» в «какая задача решается». У конкурентов могут быть похожие решения по двум причинам: у всех один сценарий (каталог, заявка, запись) или все копируют лидера.\n\nТвоя позиция: мы ориентируемся на сценарии пользователя и бизнес-цель. Похожесть может быть у базовой структуры (паттерны UX), а отличаться должны тональность, визуальная иерархия, смысловые акценты, коммуникация преимуществ.",
        convince: [
          "Соберите 3–5 примеров конкурентов и подпишите: что именно там работает (структура, CTA, навигация, контент).",
          "Покажите карту отличий: чем ваш продукт выигрывает и где это должно быть видно на первом экране.",
          "Предложите прототипирование: 1–2 ключевых экрана + тест на 5–7 пользователях.",
          "Согласуйте «зону стандарта» (то, что ожидаемо) и «зону бренда» (то, что отличает)."
        ],
        biz: "Копирование снижает узнаваемость и повышает ценовую конкуренцию. Отличия, вынесенные в структуру и акценты, дают более сильную аргументацию цены и повышают конверсию из интереса в контакт.",
        flags: [
          "Ориентация только на «внешне похоже» без анализа сценариев.",
          "Попытка собрать «лучшее от всех» в один экран.",
          "Запрос на дизайн до согласования УТП и приоритетов."
        ],
        similar: [
          { id: 6, title: "Это не похоже на наш бренд" },
          { id: 2, title: "Зачем столько белого пространства?" },
          { id: 5, title: "Надо добавить ещё одну кнопку" }
        ]
      },

      {
        id: 4,
        title: "Это слишком минималистично",
        level: "Перфекционист",
        answer: "Как корректно ответить клиенту:\n“Минимализм — это не пустота, а осознанность. Каждый элемент здесь работает на конкретную цель. Давайте разберём логику каждого решения”",

        about: "Клиент хочет больше деталей, украшений и «богатства», чтобы продукт выглядел убедительнее.",
        quick: "Как корректно ответить клиенту:\n“Давайте зафиксируем, какие факты и смыслы обязаны быть на экране. А дальше соберём их так, чтобы пользователь быстро понял ценность и сделал следующий шаг.”",
        analysis: "Минимализм в интерфейсе — это про иерархию: пользователь видит главное, затем уточнения, затем детали. Когда деталей слишком много сразу, мозг тратит время на сортировку и устаёт.\n\nМинимализм можно сделать «дорогим» за счёт типографики, сетки, ритма, воздуха и точных акцентов. Это выглядит собранно и повышает доверие, потому что ощущается как контроль и ясность.",
        convince: [
          "Составьте список «обязательных смыслов» и распределите их по уровням: главное / важное / дополнительное.",
          "Покажите вариант с раскрытием деталей по клику или по скроллу: экран остаётся читаемым, а информация доступна.",
          "Согласуйте 1–2 акцента: кнопка, цифра, выгода. Остальное — поддержка.",
          "Предложите A/B тест: минималистичная версия vs насыщенная, измерьте конверсию."
        ],
        biz: "Чёткая иерархия сокращает когнитивную нагрузку: люди быстрее понимают предложение и чаще доходят до целевого действия. Это напрямую влияет на стоимость лида и эффективность рекламы.",
        flags: [
          "Желание добавить «красоты» без роли элемента.",
          "Смешивание нескольких типов акцентов (цвет, формы, иконки) в одном блоке.",
          "Требование показать все выгоды одновременно, без приоритета."
        ],
        similar: [
          { id: 2, title: "Зачем столько белого пространства?" },
          { id: 5, title: "Надо добавить ещё одну кнопку" },
          { id: 1, title: "Почему всё такое яркое?" }
        ]
      },

      {
        id: 5,
        title: "Надо добавить ещё одну кнопку",
        level: "Тревожный",
        answer: "Как корректно ответить клиенту:\n“Давайте подумаем вместе: каждая кнопка — это выбор для пользователя. Чем больше выборов, тем сложнее принять решение. Какое действие для нас приоритетное?”",

        about: "Клиент хочет подстраховаться и добавить ещё один путь, чтобы «точно не потерять пользователя».",
        quick: "Как корректно ответить клиенту:\n“Сделаем приоритетное действие одним и самым заметным. Остальные варианты можно оставить, но в спокойном формате: ссылка, вторичная кнопка, меню.”",
        analysis: "Дополнительные кнопки чаще появляются из тревоги: «вдруг пользователь не найдёт». Логика продукта другая: пользователь должен видеть один понятный следующий шаг. Остальные варианты стоит убирать в вторичный слой, иначе конверсия размазывается.\n\nПравило простое: один экран — один главный CTA. Всё остальное — поддержка сценария, а не конкуренция с главным действием.",
        convince: [
          "Согласуйте «главный CTA» и критерий успеха (заявка, запись, покупка).",
          "Покажите карту действий: какие кнопки конкурируют между собой.",
          "Предложите вариант: одна основная кнопка + вторичная ссылка.",
          "Проверьте в аналитике: какие действия реально дают деньги и где теряются пользователи."
        ],
        biz: "Один главный CTA повышает долю пользователей, которые доходят до целевого шага. Это улучшает конверсию и снижает цену результата в рекламе.",
        flags: [
          "Требование сделать несколько равнозначных кнопок рядом.",
          "Добавление кнопок вместо проработки текста и смысла.",
          "Попытка решать проблемы сценария интерфейсным «дублированием»."
        ],
        similar: [
          { id: 4, title: "Это слишком минималистично" },
          { id: 1, title: "Почему всё такое яркое?" },
          { id: 3, title: "Конкуренты делают по- другому" }
        ]
      },

      {
        id: 6,
        title: "Это не похоже на наш бренд",
        level: "Консервативный",
        answer: "Как корректно ответить клиенту:\n“Бренд — это не только визуальные элементы, но и эмоции, которые остаются у клиентов. Давайте сохраним суть вашего бренда, но обновим форму, чтобы она лучше работала сегодня?”",

        about: "Клиент боится потерять узнаваемость и доверие, если визуально станет «по-новому».",
        quick: "Как корректно ответить клиенту:\n“Давайте зафиксируем, что для бренда неизменно: тон, ценности, ключевые элементы. И на этой базе обновим подачу так, чтобы бренд читался ещё увереннее.”",
        analysis: "Запрос «не похоже» обычно означает: клиент не видит знакомых маркеров (цвет, шрифты, характер иллюстраций), либо не чувствует привычную тональность. Решение — сформулировать «DNA бренда» в конкретных правилах: палитра, типографика, фотостиль, компоненты, примеры коммуникации.\n\nПосле этого дизайн перестаёт быть спором вкуса и становится системой: мы можем менять форму, сохраняя узнаваемые правила, и улучшать эффективность без потери идентичности.",
        convince: [
          "Зафиксируйте набор обязательных маркеров бренда (цвета, шрифты, сетка, фотостиль).",
          "Покажите 2 направления: «бережное обновление» и «смелее», оба в рамках правил.",
          "Соберите 3–5 экранов/материалов бренда и сделайте соответствие: что переносим, что обновляем.",
          "Согласуйте гайд на один лист: чтобы решение было воспроизводимым."
        ],
        biz: "Системный бренд уменьшает стоимость согласований и ускоряет производство материалов. Узнаваемость повышает доверие и конверсию из первого касания в заявку.",
        flags: [
          "Оценка бренда только по цвету и логотипу.",
          "Отсутствие правил: каждый макет «с нуля», поэтому ощущение бренда плавает.",
          "Попытка удержать всё старое и одновременно получить новый эффект."
        ],
        similar: [
          { id: 3, title: "Конкуренты делают по- другому" },
          { id: 1, title: "Почему всё такое яркое?" },
          { id: 2, title: "Зачем столько белого пространства?" }
        ]
      }
    ]

    render json: { ok: true, questions: questions }
  end

  def create
    question = params[:question].to_s.strip
    if question.empty?
      render json: { ok: false, error: "empty_question" }, status: :unprocessable_entity
      return
    end

    render json: { ok: true, message: "Вопрос принят. Следующий шаг — ответ." }
  end
end
